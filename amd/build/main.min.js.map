{"version":3,"file":"main.min.js","sources":["../src/main.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Main function\n *\n * @package\n * @copyright  2025 AttentionTag Vision Technologies Pvt Ltd\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine([\"@attention_tag/attentiontag/dist/attention-tag\"], function(atSDK) {\n    'use strict';\n    /**\n     * Init function to initialise the SDK\n     * @param {Object} options          The outer object\n     * @param {Object} options.user     user info\n     * @param {Object} options.atinfo   containing course info, section info, module info, clientid, clientsecret and projectid\n     */\n    async function init({user, atinfo}) {\n        const visualPromptContainer = document.getElementById(\"attentiontag-visual-prompt-container\");\n        const auditoryCueContainer = document.getElementById(\"attentiontag-auditory-cue-container\");\n        const chatWidgetContainer = document.getElementById(\"attentiontag-chat-widget-container\");\n        const floatingIconContainer = document.getElementById(\"floating-icon-container\");\n\n        try {\n            const at = new atSDK.AttentionTag({\n                clientId: atinfo.clientid,\n                clientSecret: atinfo.clientsecret,\n                projectId: atinfo.project\n            });\n\n            await at.initViewer({\n                viewerEmail: user.email,\n                viewerRefId: user.id,\n                viewerName: user.username\n            });\n            await at.startContent({\n                moduleName: atinfo.modulename,\n                moduleRef: atinfo.moduleref,\n                lessonName: atinfo.lessonname,\n                lessonRef: atinfo.lessonref,\n                contentName: atinfo.contentname,\n                contentRef: atinfo.contentref,\n            });\n            // Consider this as a recorded session for now i.e live=false.\n            at.startObservation(false);\n            if (visualPromptContainer) {\n                at.initVisualPrompt(visualPromptContainer);\n            }\n            if (auditoryCueContainer) {\n                at.initAuditoryCue(auditoryCueContainer);\n            }\n            if (chatWidgetContainer) {\n                at.initChatWidget(chatWidgetContainer);\n            }\n            if (floatingIconContainer) {\n                at.initDart(floatingIconContainer);\n            }\n        } catch (err) {\n            // Handle Error\n        }\n    }\n\n    return {\n        init: init\n    };\n});\n"],"names":["define","atSDK","init","user","atinfo","visualPromptContainer","document","getElementById","auditoryCueContainer","chatWidgetContainer","floatingIconContainer","at","AttentionTag","clientId","clientid","clientSecret","clientsecret","projectId","project","initViewer","viewerEmail","email","viewerRefId","id","viewerName","username","startContent","moduleName","modulename","moduleRef","moduleref","lessonName","lessonname","lessonRef","lessonref","contentName","contentname","contentRef","contentref","startObservation","initVisualPrompt","initAuditoryCue","initChatWidget","initDart","err"],"mappings":";;;;;;;AAsBAA,iCAAO,CAAC,mDAAmD,SAASC,aAqDzD,CACHC,8BA9CgBC,KAACA,KAADC,OAAOA,mBACjBC,sBAAwBC,SAASC,eAAe,wCAChDC,qBAAuBF,SAASC,eAAe,uCAC/CE,oBAAsBH,SAASC,eAAe,sCAC9CG,sBAAwBJ,SAASC,eAAe,qCAG5CI,GAAK,IAAIV,MAAMW,aAAa,CAC9BC,SAAUT,OAAOU,SACjBC,aAAcX,OAAOY,aACrBC,UAAWb,OAAOc,gBAGhBP,GAAGQ,WAAW,CAChBC,YAAajB,KAAKkB,MAClBC,YAAanB,KAAKoB,GAClBC,WAAYrB,KAAKsB,iBAEfd,GAAGe,aAAa,CAClBC,WAAYvB,OAAOwB,WACnBC,UAAWzB,OAAO0B,UAClBC,WAAY3B,OAAO4B,WACnBC,UAAW7B,OAAO8B,UAClBC,YAAa/B,OAAOgC,YACpBC,WAAYjC,OAAOkC,aAGvB3B,GAAG4B,kBAAiB,GAChBlC,uBACAM,GAAG6B,iBAAiBnC,uBAEpBG,sBACAG,GAAG8B,gBAAgBjC,sBAEnBC,qBACAE,GAAG+B,eAAejC,qBAElBC,uBACAC,GAAGgC,SAASjC,uBAElB,MAAOkC"}